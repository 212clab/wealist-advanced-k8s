---
# =============================================================================
# Wealist Shared Secrets
# =============================================================================
# Contains all shared secrets used by multiple services
# In production, consider using External Secrets Operator or HashiCorp Vault
apiVersion: v1
kind: Secret
metadata:
  name: wealist-secrets
  namespace: {{ include "wealist.namespace" . }}
  labels:
    {{- include "wealist.labels" . | nindent 4 }}
type: Opaque
stringData:
  # Database credentials
  POSTGRES_USER: {{ .Values.secrets.postgres.user | quote }}
  POSTGRES_PASSWORD: {{ .Values.secrets.postgres.password | quote }}

  # S3/MinIO credentials
  S3_ACCESS_KEY: {{ .Values.secrets.s3.accessKey | quote }}
  S3_SECRET_KEY: {{ .Values.secrets.s3.secretKey | quote }}

  # Internal API key
  INTERNAL_API_KEY: {{ .Values.config.internalApiKey | quote }}

  # JWT secret
  JWT_SECRET: {{ .Values.secrets.jwt.secret | quote }}

  {{- if .Values.secrets.oauth2.google.clientId }}
  # Google OAuth2
  GOOGLE_CLIENT_ID: {{ .Values.secrets.oauth2.google.clientId | quote }}
  GOOGLE_CLIENT_SECRET: {{ .Values.secrets.oauth2.google.clientSecret | quote }}
  {{- end }}

  {{- if .Values.secrets.oauth2.github.clientId }}
  # GitHub OAuth2
  GITHUB_CLIENT_ID: {{ .Values.secrets.oauth2.github.clientId | quote }}
  GITHUB_CLIENT_SECRET: {{ .Values.secrets.oauth2.github.clientSecret | quote }}
  {{- end }}
